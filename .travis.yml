# based on https://github.com/gchq/stroom-docs/blob/master/.travis.yml
language: node_js
dist: trusty
sudo: required

node_js:
  - "stable"

cache:
  directories:
    - node_modules # NPM packages

install:
  #- . $HOME/.nvm/nvm.sh
  #- nvm install stable
  #- nvm use stable
  #- npm install
  - npm install -g gitbook-cli

script:
    - gitbook install
    - gitbook build

before_deploy:
  #Ensure we are in the right dir
  - cd ${TRAVIS_BUILD_DIR}

deploy:
    #Push the generated gitbook html to the gh-pages branch
  - provider: pages
    skip_cleanup: true
    github_token: $GITHUB_TOKEN
    local_dir: _book
    target_branch: gh-pages
    on:
      branch: master

branches:
  only:
    - master

notifications:
  email:
    on_success: never
